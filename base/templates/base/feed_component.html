{% load static %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <div class="roomList">
          <div class="roomList__header" style="background:#191919; padding:20px; border-radius: 10px;">
<!--            <div>-->
<!--              <p>{{room_count}} Post available</p>-->
<!--            </div>-->
               {% if request.user.is_authenticated %}
          <div class="header__user">
            <a href="profile.html">
              <div class="avatar avatar--medium active" style="">
                <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="">

              </div>
            </a>

          </div>
          {% else %}
       <a href="{% url 'login' %}">
           <div style="max-width: 60px;">
            <img src="https://bootdey.com/img/Content/avatar/avatar7.png" />
           </div>
          </a>
        {% endif %}

            <a style="margin-right: 240px; font-size: 1.5rem;" class="btn btn-outline-light" href="{% url 'create_room' %}">
              What's on your mind?
            </a>
          </div>
          {% for room in rooms %}
          <div class="roomListRoom">
            <div class="roomListRoom__header">
              <a  class="roomListRoom__author" href="{% url 'profile' room.host.id %}">
                <div class="avatar avatar--small">
                  <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="">
                </div>

                    <span style="text-transform: capitalize; font-size: 1.9rem; color: #fff;">{{room.host.username}}</span>

              </a>

   
<div class="option" >
    {% if request.user == room.host %}
        <a href="{% url 'update-room' room.id%}"><i class="fa-regular fa-pen-to-square" style="font-size: 20px;"></i> &nbsp;</a>
        <a style="color: red  ;" href="{% url 'delete-room' room.id%}"><i class="fa-solid fa-trash" style="font-size: 20px;"></i></a>
    {% endif %}
</div>


            </div>
                <div class="roomListRoom__actions mt-1 ml-5">
                <span style="opacity: .8; font-size: 12px ; color:#d5d5d5">{{room.created | timesince}} ago</span>
              </div>

            <div class="roomListRoom__content">
<!--              <a style="color: #fff; weight:bold;" href="{% url 'room' room.id %}"> {{room.name}}</a>-->
              <p style="color: #e5e5e5; font-size: 1.5rem;">
               {{room.description}}
              </p>
              <img src="{{room.imageURL}}" alt="{{room.imageURL}}" style="width: 100%; max-height: 350px;" >
            </div>
            <div class="roomListRoom__meta">
                <a href="{% url 'room' room.id%}" class="roomListRoom__joined">
                <i class="fa-solid fa-people-group"></i>
                  {% for key, value in room_participants_counts.items %}
                        {% if key == room.id %}
                            {{ value }}
                        {% endif %}
                  {% endfor %}

              </a>
                <!-- <a style="color: #e5e5e5; weight:bold;" > {{room.topic}}</a> -->
                <a href="{% url 'room' room.id %}" style="font-size: 1.5rem;" class="btn btn-outline-light">Comment</a>
            </div>
          </div>
          {% endfor %}
        </div>